import{E as e,a as t}from"./shared.js";import"./settings.js";var n={};function o(){try{return new window.XMLHttpRequest}catch(e){}}n._getBinaryFromXHR=function(e){return e.response||e.responseText};var r="undefined"!=typeof window&&window.ActiveXObject?function(){return o()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:o;n.getBinaryContent=function(e,t){var o,a,i,s;t||(t={}),"function"==typeof t?(s=t,t={}):"function"==typeof t.callback&&(s=t.callback),s||"undefined"==typeof Promise?(a=function(e){s(null,e)},i=function(e){s(e,null)}):o=new Promise((function(e,t){a=e,i=t}));try{var c=r();c.open("GET",e,!0),"responseType"in c&&(c.responseType="arraybuffer"),c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.onreadystatechange=function(t){if(4===c.readyState)if(200===c.status||0===c.status)try{a(n._getBinaryFromXHR(c))}catch(e){i(new Error(e))}else i(new Error("Ajax error for "+e+" : "+this.status+" "+this.statusText))},t.progress&&(c.onprogress=function(n){t.progress({path:e,originalEvent:n,percent:n.loaded/n.total*100,loaded:n.loaded,total:n.total})}),c.send()}catch(e){i(new Error(e),null)}return o},document.addEventListener("DOMContentLoaded",(async function(){const o=new URLSearchParams(window.location.search);o.has("url")||(window.location.href="/index.html");const r=decodeURIComponent(o.get("url"));n.getBinaryContent(r,(async(n,o)=>{if(!n)try{const n=await e.newFromFile(o);await t(n),alert("Book added succesfully"),window.location.href="/index.html",console.log(n.title,"sera agregado")}catch(n){alert(n),window.location.href="/index.html"}}))}));
